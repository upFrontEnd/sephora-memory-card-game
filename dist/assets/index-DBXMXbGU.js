(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const L="theme";function O(){const e=localStorage.getItem(L);return e==="light"||e==="dark"?e:window.matchMedia?.("(prefers-color-scheme: dark)")?.matches?"dark":"light"}function y(e){const t=document.documentElement;t.dataset.theme=e,t.style.colorScheme=e;const n=document.getElementById("theme-switch");n&&(n.checked=e==="light",n.setAttribute("aria-checked",String(n.checked))),localStorage.setItem(L,e)}function M(){const e=document.getElementById("theme-switch");e&&(y(O()),e.addEventListener("change",()=>{const t=e.checked?"light":"dark";y(t)}))}const b={flip:"/sound/flip.mp3",match:"/sound/match.mp3",win:"/sound/win.mp3"},T={flip:1,unflip:1,match:1,win:.1},f={enabled:!1},h={};function q(e){const t=b[e];if(!t)return null;const n=new Audio(t);n.preload="auto";const i=T[e];return n.volume=typeof i=="number"?i:1,h[e]=n,n}function v(e){return h[e]?h[e]:q(e)}function D(){Object.keys(b).forEach(e=>{const t=v(e);t&&t.load()})}function m(e){if(!f.enabled)return;const t=v(e);t&&(t.currentTime=0,t.play().catch(()=>{}))}function B(){const e=document.querySelector(".sound-toggle");if(!e)return;function t(){f.enabled?(e.classList.add("sound-toggle--on"),e.setAttribute("aria-pressed","true"),e.setAttribute("aria-label","DÃ©sactiver le son")):(e.classList.remove("sound-toggle--on"),e.setAttribute("aria-pressed","false"),e.setAttribute("aria-label","Activer le son"))}e.addEventListener("click",()=>{f.enabled=!f.enabled,t()}),t()}function g(e){const t=e.length;e.forEach(n=>{n.style.order=Math.floor(Math.random()*t)})}function P(e){if(!e)return;e.hasAttribute("role")||e.setAttribute("role","button"),e.hasAttribute("tabindex")||e.setAttribute("tabindex","0");function t(n){const{key:i}=n;(i==="Enter"||i===" ")&&(n.preventDefault(),e.click())}e.addEventListener("keydown",t)}function I(e){e.forEach(t=>P(t))}function N(){const e=Array.from(document.querySelectorAll(".memory-card")),t=document.querySelector(".memory-game"),n=document.querySelector(".win-overlay"),i=document.querySelector("#win-lottie"),o=document.querySelector(".replay-button");let r=!1,c=!1,a=null,l=null;function p(){r=!1,c=!1,a=null,l=null}function E(){c=!0,setTimeout(()=>{a.classList.remove("flip"),l.classList.remove("flip"),c=!1},900)}function w(){c=!0;const s=a,d=l;s.removeEventListener("click",u),d.removeEventListener("click",u),setTimeout(()=>{s.classList.add("memory-card-shadow"),d.classList.add("memory-card-shadow"),p(),S(),m("match")},900)}function A(){a.dataset.product===l.dataset.product?w():E()}function u(){if(!c&&this!==a){if(this.classList.add("flip"),m("flip"),!r){r=!0,a=this;return}r=!1,l=this,A()}}function S(){if(!t||t.classList.contains("win"))return;const s=e.length,d=document.querySelectorAll(".memory-card.memory-card-shadow").length;s>0&&d===s&&(t.classList.add("win"),m("win"),playWinLottie())}function k(){p(),e.forEach(s=>{s.classList.remove("flip","memory-card-shadow"),s.addEventListener("click",u)}),t&&t.classList.remove("win"),n&&(n.hidden=!0),i?.dotLottie&&i.dotLottie.stop(),g(e)}function C(){g(e),e.forEach(s=>{s.addEventListener("click",u)}),I(e),o&&o.addEventListener("click",k),n&&(n.hidden=!0),t&&t.classList.remove("win")}return{mount:C}}document.addEventListener("DOMContentLoaded",()=>{D(),M(),B(),F()});function F(){N().mount()}
//# sourceMappingURL=index-DBXMXbGU.js.map
